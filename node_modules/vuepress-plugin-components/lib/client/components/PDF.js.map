{"version":3,"file":"PDF.js","sources":["../../../src/client/components/PDF.ts"],"sourcesContent":["import { withBase } from \"@vuepress/client\";\nimport { isLinkHttp } from \"@vuepress/shared\";\nimport { computed, defineComponent, h, onMounted, ref } from \"vue\";\nimport {\n  checkIsMobile,\n  checkIsiPad,\n  checkIsiPhone,\n  checkIsSafari,\n} from \"vuepress-shared/lib/client\";\n\nimport type { VNode } from \"vue\";\n\nimport \"../styles/pdf.scss\";\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\ndeclare const __VUEPRESS_SSR__: boolean;\n\nexport default defineComponent({\n  name: \"PDF\",\n\n  props: {\n    url: { type: String, required: true },\n    height: { type: [String, Number], default: 480 },\n    page: {\n      type: Number,\n      default: 1,\n    },\n    toolbar: {\n      type: Boolean,\n      default: true,\n    },\n    zoom: {\n      type: Number,\n      default: 100,\n    },\n  },\n\n  setup(props) {\n    const isChrome = ref(true);\n    const isMobile = ref(false);\n\n    const hash = computed(\n      () =>\n        `#page=${props.page}&toolbar=${props.toolbar ? 1 : 0}&zoom=${\n          props.zoom\n        }`\n    );\n\n    const height = computed(() =>\n      typeof props.height === \"string\" ? props.height : `${props.height}px`\n    );\n\n    onMounted(() => {\n      const { userAgent } = navigator;\n\n      // chrome mobile\n      if (checkIsMobile(userAgent)) isMobile.value = true;\n      else if (\n        checkIsSafari(userAgent) &&\n        (checkIsiPad(userAgent) || checkIsiPhone(userAgent))\n      ) {\n        isChrome.value = false;\n\n        if (checkIsiPad(userAgent) || checkIsiPhone(userAgent))\n          isMobile.value = true;\n      }\n    });\n\n    return (): VNode => {\n      const link = withBase(props.url);\n\n      const fullLink = `${\n        isLinkHttp(link) || __VUEPRESS_SSR__ ? \"\" : window?.location.host || \"\"\n      }${link}`;\n\n      return h(\"div\", { class: \"pdf-preview\" }, [\n        h(\"iframe\", {\n          class: \"pdf-iframe\",\n          src: isMobile.value\n            ? `https://drive.google.com/viewerng/viewer?embedded=true&url=${encodeURI(\n                fullLink\n              )}`\n            : `${withBase(props.url)}${isChrome.value ? hash.value : \"\"}`,\n          style: {\n            width: \"100%\",\n            height: height.value,\n            \"border-radius\": \"8px\",\n          },\n        }),\n        h(\n          \"button\",\n          {\n            class: \"pdf-open-button\",\n            onClick: () => {\n              window.open(fullLink);\n            },\n          },\n          \"Open\"\n        ),\n      ]);\n    };\n  },\n});\n"],"names":["defineComponent","props","isChrome","ref","isMobile","hash","computed","height","onMounted","userAgent","checkIsMobile","checkIsSafari","checkIsiPad","checkIsiPhone","link","withBase","fullLink","isLinkHttp","h"],"mappings":"0TAiBA,IAAeA,EAAAA,EAAgB,CAC7B,KAAM,MAEN,MAAO,CACL,IAAK,CAAE,KAAM,OAAQ,SAAU,EAAK,EACpC,OAAQ,CAAE,KAAM,CAAC,OAAQ,MAAM,EAAG,QAAS,GAAI,EAC/C,KAAM,CACJ,KAAM,OACN,QAAS,CACX,EACA,QAAS,CACP,KAAM,QACN,QAAS,EACX,EACA,KAAM,CACJ,KAAM,OACN,QAAS,GACX,CACF,EAEA,MAAMC,EAAO,CACX,MAAMC,EAAWC,EAAI,EAAI,EACnBC,EAAWD,EAAI,EAAK,EAEpBE,EAAOC,EACX,IACE,SAASL,EAAM,gBAAgBA,EAAM,QAAU,EAAI,UACjDA,EAAM,MAEZ,EAEMM,EAASD,EAAS,IACtB,OAAOL,EAAM,QAAW,SAAWA,EAAM,OAAS,GAAGA,EAAM,UAC7D,EAEA,OAAAO,EAAU,IAAM,CACd,KAAM,CAAE,UAAAC,CAAU,EAAI,UAGlBC,EAAcD,CAAS,EAAGL,EAAS,MAAQ,GAE7CO,EAAcF,CAAS,IACtBG,EAAYH,CAAS,GAAKI,EAAcJ,CAAS,KAElDP,EAAS,MAAQ,IAEbU,EAAYH,CAAS,GAAKI,EAAcJ,CAAS,KACnDL,EAAS,MAAQ,IAEvB,CAAC,EAEM,IAAa,CAClB,MAAMU,EAAOC,EAASd,EAAM,GAAG,EAEzBe,EAAW,GACfC,EAAWH,CAAI,GAAK,iBAAmB,IAAK,QAAA,KAAA,OAAA,OAAQ,SAAS,OAAQ,KACpEA,IAEH,OAAOI,EAAE,MAAO,CAAE,MAAO,aAAc,EAAG,CACxCA,EAAE,SAAU,CACV,MAAO,aACP,IAAKd,EAAS,MACV,8DAA8D,UAC5DY,CACF,IACA,GAAGD,EAASd,EAAM,GAAG,IAAIC,EAAS,MAAQG,EAAK,MAAQ,KAC3D,MAAO,CACL,MAAO,OACP,OAAQE,EAAO,MACf,gBAAiB,KACnB,CACF,CAAC,EACDW,EACE,SACA,CACE,MAAO,kBACP,QAAS,IAAM,CACb,OAAO,KAAKF,CAAQ,CACtB,CACF,EACA,MACF,CACF,CAAC,CACH,CACF,CACF,CAAC"}