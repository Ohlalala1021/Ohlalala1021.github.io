{"version":3,"file":"index.js","sources":["../../src/node/utils.ts","../../src/node/compact/utils.ts","../../src/node/compact/convert.ts","../../src/node/generateManifest.ts","../../src/node/generateServiceWorker.ts","../../src/node/helper.ts","../../src/node/injectHead.ts","../../src/node/locales.ts","../../src/node/prepare.ts","../../src/node/plugin.ts"],"sourcesContent":["import { Logger } from \"vuepress-shared\";\n\nexport const logger = new Logger(\"vuepress-plugin-pwa2\");\n","import { logger } from \"../utils.js\";\n\nexport interface DeprecatedLoggerOptions {\n  options: Record<string, unknown>;\n  deprecatedOption: string;\n  newOption: string;\n  msg?: string;\n  scope?: string;\n}\n\nexport const deprecatedLogger = ({\n  options,\n  deprecatedOption,\n  newOption,\n  msg = \"\",\n  scope = \"\",\n}: DeprecatedLoggerOptions): void => {\n  if (deprecatedOption in options) {\n    logger.warn(\n      `\"${deprecatedOption}\" is deprecated${\n        scope ? ` in ${scope}` : \"\"\n      }, please use \"${newOption}\" instead.${msg ? `\\n${msg}` : \"\"}`\n    );\n\n    if (newOption.includes(\".\")) {\n      const keys = newOption.split(\".\");\n      let temp = options;\n\n      keys.forEach((key, index) => {\n        if (index !== keys.length - 1) {\n          // ensure level exists\n          temp[key] = temp[key] || {};\n\n          temp = temp[key] as Record<string, unknown>;\n        } else temp[key] = options[deprecatedOption];\n      });\n    } else options[newOption] = options[deprecatedOption];\n\n    delete options[deprecatedOption];\n  }\n};\n","import { deprecatedLogger } from \"./utils.js\";\nimport type { PWAOptions } from \"../../shared/index.js\";\n\n/** @deprecated */\nexport const convertOptions = (\n  options: PWAOptions & Record<string, unknown>\n): void => {\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"cacheMaxSize\",\n    newOption: \"maxSize\",\n  });\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"popupComponent\",\n    newOption: \"updateComponent\",\n  });\n};\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { chalk, fs, path } from \"@vuepress/utils\";\nimport { getRootLang } from \"vuepress-shared\";\n\nimport { logger } from \"./utils.js\";\n\nimport type { App } from \"@vuepress/core\";\nimport type { ManifestOption, PWAOptions } from \"../shared/index.js\";\n\nexport const getManifest = async (\n  app: App,\n  options: PWAOptions\n): Promise<ManifestOption> => {\n  const { dir, siteData } = app;\n\n  const { base } = app.options;\n  const userManifestPath = dir.source(\".vuepress/public/manifest.webmanifest\");\n  const userManifestJSONPath = dir.source(\".vuepress/public/manifest.json\");\n\n  const optionManifest = options.manifest || {};\n\n  const userManifest = <ManifestOption>(\n    JSON.parse(\n      fs.existsSync(userManifestPath)\n        ? await fs.readFile(userManifestPath, \"utf8\")\n        : fs.existsSync(userManifestJSONPath)\n        ? await fs.readFile(userManifestJSONPath, \"utf8\")\n        : \"{}\"\n    )\n  );\n\n  const finalManifest: ManifestOption = {\n    name: siteData.title || siteData.locales[\"/\"]?.title || \"Site\",\n    short_name: siteData.title || siteData.locales[\"/\"]?.title || \"Site\",\n    description:\n      siteData.description ||\n      siteData.locales[\"/\"]?.description ||\n      \"A site built with vuepress\",\n    lang: getRootLang(app),\n    start_url: base,\n    scope: base,\n\n    display: \"standalone\",\n    theme_color: options.themeColor || \"#46bd87\",\n    background_color: \"#ffffff\",\n    orientation: \"portrait-primary\",\n    prefer_related_applications: false,\n\n    ...userManifest,\n    ...optionManifest,\n  };\n\n  return finalManifest;\n};\n\nexport const generateManifest = async (\n  app: App,\n  manifest: Promise<ManifestOption>\n): Promise<void> => {\n  logger.load(\"Generating manifest.webmanifest\");\n\n  const { dir } = app;\n  const manifestPath = dir.dest(\"manifest.webmanifest\");\n\n  await fs.writeJSON(manifestPath, await manifest, {\n    flag: \"w\",\n  });\n\n  logger.succeed();\n  logger.update(\n    `Manifest generated and saved to ${chalk.cyan(\n      path.relative(process.cwd(), manifestPath)\n    )}!`\n  );\n};\n","import { chalk, fs, path } from \"@vuepress/utils\";\nimport { generateSW } from \"workbox-build\";\nimport { logger } from \"./utils.js\";\n\nimport type {\n  ManifestEntry,\n  ManifestTransform,\n  ManifestTransformResult,\n} from \"workbox-build\";\n\nimport type { App } from \"@vuepress/core\";\nimport type { PWAOptions } from \"../shared/index.js\";\n\nconst imageFilter =\n  (outDir: string, maxsize = 1024): ManifestTransform =>\n  (\n    manifestEntries: (ManifestEntry & { size: number })[]\n  ): ManifestTransformResult => {\n    const warnings: string[] = [];\n    const manifest: (ManifestEntry & { size: number })[] = [];\n    const imageExtensions = [\".png\", \".jpg\", \".jpeg\", \"webp\", \"bmp\", \"gif\"];\n\n    for (const entry of manifestEntries)\n      if (imageExtensions.some((ext) => entry.url.endsWith(ext))) {\n        const stats = fs.statSync(path.resolve(outDir, entry.url));\n\n        if (stats.size > maxsize * 1024)\n          warnings.push(\n            `Skipped ${entry.url}, as it's ${Math.ceil(stats.size / 1024)} KB.`\n          );\n        else manifest.push(entry);\n      } else manifest.push(entry);\n\n    return { warnings, manifest };\n  };\n\nexport const generateServiceWorker = async (\n  app: App,\n  options: PWAOptions\n): Promise<void> => {\n  logger.load(\"Generating service worker\");\n\n  const { dest } = app.dir;\n  const { title, locales } = app.siteData;\n  const swDest = dest(\"service-worker.js\");\n  const destDir = path.relative(process.cwd(), dest());\n\n  // FIXME: vuepress2beta50 has a bug that output app.js as app.mjs,\n  // this shoud be removed after vuepress2 release beta51\n  const globPatterns = [\"**/*.{js,mjs,css,svg,woff,woff2,eot,ttf,otf}\"];\n\n  if (options.cacheHTML) globPatterns.push(\"**/*.html\");\n  else globPatterns.push(\"./index.html\", \"./404.html\");\n\n  if (options.cachePic) globPatterns.push(\"**/*.{png,jpg,jpeg,bmp,gif,webp}\");\n\n  await generateSW({\n    swDest,\n    globDirectory: destDir,\n    cacheId: title || locales[\"/\"]?.title || \"hope\",\n    globPatterns,\n    cleanupOutdatedCaches: true,\n    clientsClaim: true,\n    maximumFileSizeToCacheInBytes: (options.maxSize || 2048) * 1024,\n    manifestTransforms: [imageFilter(destDir, options.maxPicSize)],\n    ...(options.generateSWConfig || {}),\n  }).then(({ count, size, warnings }) => {\n    logger.succeed();\n\n    logger.info(\n      `Precache ${chalk.cyan(`${count} files`)}, totaling ${chalk.cyan(\n        `${(size / 1024 / 1024).toFixed(2)} Mb.`\n      )}.`\n    );\n\n    if (warnings.length)\n      logger.warn(\n        `\\n${warnings.map((warning) => `  Â· ${warning}`).join(\"\\n\")}`\n      );\n\n    if (size > 104857600)\n      logger.error(\n        `Cache Size is larger than 100MB, so that it can not be registerd on all browsers.\\n${chalk.blue(\n          \"Please consider disable `cacheHTML` and `cachePic`, or set `maxSize` and `maxPicSize` option.\\n\"\n        )}`\n      );\n    else if (size > 52428800)\n      logger.warn(\n        `\\nCache Size is larger than 50MB, which will not be registerd on Safari.\\n${chalk.blue(\n          \"Please consider disable `cacheHTML` and `cachePic`, or set `maxSize` and `maxPicSize` option.\\n\"\n        )}`\n      );\n  });\n};\n","import type { ManifestOption, PWAOptions } from \"../shared/index.js\";\n\nconst appendBaseHelper = (base: string, link: string): string =>\n  link.startsWith(\"/\") ? link.replace(/^\\//, base) : link;\n\nexport const appendBasetoManifest = (\n  base: string,\n  manifest: ManifestOption\n): ManifestOption => {\n  if (manifest.icons)\n    manifest.icons = manifest.icons.map((icon) => ({\n      ...icon,\n      src: appendBaseHelper(base, icon.src),\n    }));\n\n  if (manifest.shortcuts)\n    manifest.shortcuts = manifest.shortcuts.map((shortcut) => ({\n      ...shortcut,\n      icons:\n        shortcut.icons?.map((icon) => ({\n          ...icon,\n          src: appendBaseHelper(base, icon.src),\n        })) || [],\n      url: appendBaseHelper(base, shortcut.url),\n    }));\n\n  if (manifest.screenshots)\n    manifest.screenshots = manifest.screenshots.map((screenshot) => ({\n      ...screenshot,\n      src: appendBaseHelper(base, screenshot.src),\n    }));\n\n  return manifest;\n};\n\nexport const appendBase = (base: string, options: PWAOptions): void => {\n  if (options.favicon)\n    options.favicon = appendBaseHelper(base, options.favicon);\n\n  if (options.apple) {\n    if (options.apple.icon)\n      options.apple.icon = appendBaseHelper(base, options.apple.icon);\n\n    if (options.apple.maskIcon)\n      options.apple.maskIcon = appendBaseHelper(base, options.apple.maskIcon);\n  }\n\n  if (options.msTile && options.msTile.image)\n    options.msTile.image = appendBaseHelper(base, options.msTile.image);\n\n  if (options.manifest)\n    options.manifest = appendBasetoManifest(base, options.manifest);\n};\n","import type { HeadConfig } from \"@vuepress/core\";\nimport type { PWAOptions } from \"../shared/index.js\";\n\nexport const injectLinkstoHead = (\n  options: PWAOptions,\n  base = \"/\",\n  head: HeadConfig[] = []\n): HeadConfig[] => {\n  const metaKeys: string[] = [];\n  const linkKeys: string[] = [];\n\n  // Generate Hash for Head\n  head.forEach((item) => {\n    if (item[0] === \"meta\") metaKeys.push(<string>item[1][\"name\"]);\n    else if (item[0] === \"link\") linkKeys.push(<string>item[1][\"rel\"]);\n  });\n\n  let fallBackIcon = \"\";\n  const setLink = (\n    rel: string,\n    href: string,\n    more: Record<string, string> = {}\n  ): void => {\n    if (!linkKeys.includes(rel)) head.push([\"link\", { rel, href, ...more }]);\n  };\n\n  const setMeta = (\n    name: string,\n    content: string,\n    more: Record<string, string> = {}\n  ): void => {\n    if (!metaKeys.includes(name))\n      head.push([\"meta\", { name, content, ...more }]);\n  };\n\n  if (options.favicon) setLink(\"icon\", options.favicon);\n\n  if (options.manifest?.icons) {\n    const { icons } = options.manifest;\n\n    if (icons.length > 0) {\n      fallBackIcon = icons[0].src;\n\n      options.manifest.icons.map((icon) => {\n        if (icon.type)\n          setLink(\"icon\", icon.src, { type: icon.type, sizes: icon.sizes });\n        else setLink(\"icon\", icon.src, { sizes: icon.sizes });\n      });\n    }\n  }\n\n  setLink(\"manifest\", `${base}manifest.webmanifest`, {\n    crossorigin: \"use-credentials\",\n  });\n  setMeta(\"theme-color\", options.themeColor || \"#46bd87\");\n\n  if (\n    typeof options.apple === \"object\" &&\n    (options.apple.icon || fallBackIcon)\n  ) {\n    setLink(\"apple-touch-icon\", options.apple.icon || fallBackIcon);\n    setMeta(\"apple-mobile-web-app-capable\", \"yes\");\n    setMeta(\n      \"apple-mobile-web-app-status-bar-style\",\n      options.apple.statusBarColor || \"black\"\n    );\n    if (options.apple.maskIcon)\n      setLink(\"mask-icon\", options.apple.maskIcon, {\n        color: options.themeColor || \"#46bd87\",\n      });\n  } else if (options.apple !== false && fallBackIcon) {\n    setLink(\"apple-touch-icon\", fallBackIcon);\n    setMeta(\"apple-mobile-web-app-capable\", \"yes\");\n    setMeta(\"apple-mobile-web-app-status-bar-style\", \"black\");\n  }\n\n  if (\n    typeof options.msTile === \"object\" &&\n    (options.msTile.image || fallBackIcon)\n  ) {\n    setMeta(\"msapplication-TileImage\", options.msTile.image || fallBackIcon);\n    setMeta(\n      \"msapplication-TileColor\",\n      options.msTile.color || options.themeColor || \"#46bd87\"\n    );\n  } else if (options.msTile !== false && fallBackIcon) {\n    setMeta(\"msapplication-TileImage\", fallBackIcon);\n    setMeta(\"msapplication-TileColor\", options.themeColor || \"#46bd87\");\n  }\n\n  // enhance pwa experience\n  setMeta(\n    \"viewport\",\n    \"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover\"\n  );\n\n  return head;\n};\n","import type { PWALocaleConfig } from \"../shared/index.js\";\n\n/** Muti language config for pwa popup */\nexport const pwaLocales: PWALocaleConfig = {\n  \"/en/\": {\n    install: \"Install\",\n    iOSInstall: \"Tap the share button and then 'Add to Homescreen'\",\n    cancel: \"Cancel\",\n    close: \"Close\",\n    prevImage: \"Previous Image\",\n    nextImage: \"Next Image\",\n    desc: \"Description\",\n    feature: \"Key Features\",\n    explain:\n      \"This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. \",\n    hint: \"New content found.\",\n    update: \"New content is available.\",\n  },\n\n  \"/zh/\": {\n    install: \"å®è£\",\n    iOSInstall: \"ç¹å»åäº«æé®ç¶åç¹å»âæ·»å å°ä¸»å±å¹â\",\n    cancel: \"åæ¶\",\n    close: \"å³é­\",\n    prevImage: \"ä¸ä¸å¼ å¾ç\",\n    nextImage: \"ä¸ä¸å¼ å¾ç\",\n    desc: \"è¯¦æ\",\n    feature: \"ä¸»è¦ç¹è²\",\n    explain:\n      \"è¯¥åºç¨å¯ä»¥å®è£å¨ä½ ç PC æç§»å¨è®¾å¤ä¸ãè¿å°ä½¿è¯¥ Web åºç¨ç¨åºå¤è§åè¡ä¸ºä¸å¶ä»åºç¨ç¨åºç¸åãå®å°å¨åºç°å¨åºç¨ç¨åºåè¡¨ä¸­ï¼å¹¶å¯ä»¥åºå®å°ä¸»å±å¹ï¼å¼å§èåæä»»å¡æ ãæ­¤ Web åºç¨ç¨åºè¿å°è½å¤ä¸å¶ä»åºç¨ç¨åºåä½ çæä½ç³»ç»å®å¨å°è¿è¡äº¤äºã\",\n    hint: \"åç°æ°åå®¹å¯ç¨\",\n    update: \"æ°åå®¹å·²å°±ç»ª\",\n  },\n\n  \"/zh-tw/\": {\n    install: \"å®è£\",\n    iOSInstall: \"é»æåäº«æéç¶å¾é»æâæ·»å å°ä¸»ç«é¢â\",\n    cancel: \"åæ¶\",\n    close: \"éé\",\n    prevImage: \"ä¸ä¸å¼µåç\",\n    nextImage: \"ä¸ä¸å¼µåç\",\n    desc: \"è©³æ\",\n    feature: \"ä¸»è¦ç¹è²\",\n    explain:\n      \"è©²æç¨å¯ä»¥å®è£å¨ä½ ç PC æè¡åè£ç½®ä¸ãéå°ä½¿è©² Web æç¨ç¨å¼å¤è§åè¡çºèå¶ä»æç¨ç¨å¼ç¸åãå®å°å¨åºç¾å¨æç¨ç¨å¼åè¡¨ä¸­ï¼ä¸¦å¯ä»¥åºå®å°ä¸»ç«é¢ï¼éå§èå®æä»»åæ¬ãæ­¤ Web æç¨ç¨å¼éå°è½å¤ èå¶ä»æç¨ç¨å¼åä½ çæä½ç³»çµ±å®å¨å°é²è¡äº¤äºã\",\n    hint: \"ç¼ç¾æ°åå®¹å¯ç¨\",\n    update: \"æ°åå®¹å·²å°±ç»ª\",\n  },\n\n  \"/de-at/\": {\n    install: \"Installieren\",\n    iOSInstall: \"Drucke den Share-Button und dan 'zu Homescreen hinzufÃ¼gen'\",\n    cancel: \"Abbrechen\",\n    close: \"SchlieÃen\",\n    prevImage: \"Vorheriges Bild\",\n    nextImage: \"NÃ¤chstes Bild\",\n    desc: \"Berschreibung\",\n    feature: \"Features\",\n    explain:\n      \"Diese App kann auf Ihrem PC oder MobilgerÃ¤t installiert werden.  Dadurch sieht diese Web-App aus und verhÃ¤lt sich wie jede andere installierte App.  Sie finden sie in Ihren App-Listen und kÃ¶nnen sie an den Startbildschirm, die StartmenÃ¼s oder die Taskleisten anheften.  Diese installierte Web-App kann auch sicher mit anderen Apps und Ihrem Betriebssystem interagieren.\",\n    hint: \"Neue Inhalte sind verfÃ¼gbar.\",\n    update: \"Neue Inhalte sind verfÃ¼gbar.\",\n  },\n\n  \"/vi/\": {\n    install: \"Táº£i vá»\",\n    iOSInstall: \"Nháº¥n vÃ o nÃºt chia sáº» vÃ  sau ÄÃ³ 'ThÃªm vÃ o MÃ n hÃ¬nh chÃ­nh'\",\n    cancel: \"Huá»· bá»\",\n    close: \"ÄÃ³ng\",\n    prevImage: \"HÃ¬nh áº£nh trÆ°á»c ÄÃ³\",\n    nextImage: \"HÃ¬nh áº£nh tiáº¿p theo\",\n    desc: \"Sá»± miÃªu táº£\",\n    feature: \"CÃ¡c tÃ­nh nÄng chÃ­nh\",\n    explain:\n      \"á»¨ng dá»¥ng nÃ y cÃ³ thá» ÄÆ°á»£c cÃ i Äáº·t trÃªn PC hoáº·c thiáº¿t bá» di Äá»ng cá»§a báº¡n. Äiá»u nÃ y sáº½ cho phÃ©p á»©ng dá»¥ng web nÃ y trÃ´ng vÃ  hoáº¡t Äá»ng giá»ng nhÆ° báº¥t ká»³ á»©ng dá»¥ng ÄÃ£ cÃ i Äáº·t nÃ o khÃ¡c. Báº¡n sáº½ tÃ¬m tháº¥y nÃ³ trong danh sÃ¡ch á»©ng dá»¥ng cá»§a mÃ¬nh vÃ  cÃ³ thá» ghim nÃ³ vÃ o mÃ n hÃ¬nh chÃ­nh, menu báº¯t Äáº§u hoáº·c thanh tÃ¡c vá»¥. á»¨ng dá»¥ng web ÄÃ£ cÃ i Äáº·t nÃ y cÅ©ng sáº½ cÃ³ thá» tÆ°Æ¡ng tÃ¡c an toÃ n vá»i cÃ¡c á»©ng dá»¥ng khÃ¡c vÃ  há» Äiá»u hÃ nh cá»§a báº¡n.\",\n    hint: \"Ná»i dung má»i ÄÆ°á»£c tÃ¬m tháº¥y\",\n    update: \"ÄÃ£ cÃ³ ná»i dung má»i\",\n  },\n\n  \"/uk/\": {\n    install: \"ÐÑÑÐ°Ð½Ð¾Ð²Ð¸ÑÐ¸\",\n    iOSInstall:\n      \"Ð¢Ð¾ÑÐºÐ½ÑÑÑÑÑ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Â«ÐÐ¾Ð´ÑÐ»Ð¸ÑÐ¸ÑÑÂ», Ð° Ð¿Ð¾ÑÑÐ¼ Â«ÐÐ¾Ð´Ð°ÑÐ¸ Ð½Ð° Ð³Ð¾Ð»Ð¾Ð²Ð½Ð¸Ð¹ ÐµÐºÑÐ°Ð½Â»\",\n    cancel: \"Ð¡ÐºÐ°ÑÑÐ²Ð°ÑÐ¸\",\n    close: \"ÐÐ°ÐºÑÐ¸ÑÐ¸\",\n    prevImage: \"ÐÐ¾Ð¿ÐµÑÐµÐ´Ð½Ñ Ð·Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð½Ñ\",\n    nextImage: \"ÐÐ°ÑÑÑÐ¿Ð½Ðµ Ð·Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð½Ñ\",\n    desc: \"ÐÐ¿Ð¸Ñ\",\n    feature: \"ÐÑÐ½Ð¾Ð²Ð½Ñ ÑÐ°ÑÐ°ÐºÑÐµÑÐ¸ÑÑÐ¸ÐºÐ¸\",\n    explain:\n      \"Ð¦Ñ Ð¿ÑÐ¾Ð³ÑÐ°Ð¼Ñ Ð¼Ð¾Ð¶Ð½Ð° Ð²ÑÑÐ°Ð½Ð¾Ð²Ð¸ÑÐ¸ Ð½Ð° ÐÐ Ð°Ð±Ð¾ Ð¼Ð¾Ð±ÑÐ»ÑÐ½Ð¸Ð¹ Ð¿ÑÐ¸ÑÑÑÑÐ¹. Ð¦Ðµ Ð´Ð¾Ð·Ð²Ð¾Ð»Ð¸ÑÑ ÑÑÐ¹ Ð²ÐµÐ±-Ð¿ÑÐ¾Ð³ÑÐ°Ð¼Ñ Ð²Ð¸Ð³Ð»ÑÐ´Ð°ÑÐ¸ ÑÐ° Ð²ÐµÑÑÐ¸ ÑÐµÐ±Ðµ ÑÐº Ð±ÑÐ´Ñ-ÑÐºÐ° ÑÐ½ÑÐ° Ð²ÑÑÐ°Ð½Ð¾Ð²Ð»ÐµÐ½Ð° Ð¿ÑÐ¾Ð³ÑÐ°Ð¼Ð°. ÐÐ¸ Ð·Ð½Ð°Ð¹Ð´ÐµÑÐµ ÑÑ Ñ ÑÐ¿Ð¸ÑÐºÐ°Ñ Ð´Ð¾Ð´Ð°ÑÐºÑÐ² Ñ Ð·Ð¼Ð¾Ð¶ÐµÑÐµ Ð·Ð°ÐºÑÑÐ¿Ð¸ÑÐ¸ Ð½Ð° Ð³Ð¾Ð»Ð¾Ð²Ð½Ð¾Ð¼Ñ ÐµÐºÑÐ°Ð½Ñ, Ð² Ð¼ÐµÐ½Ñ Â«ÐÑÑÐºÂ» Ð°Ð±Ð¾ Ð½Ð° Ð¿Ð°Ð½ÐµÐ»Ñ Ð·Ð°Ð²Ð´Ð°Ð½Ñ. Ð¦Ñ Ð²ÑÑÐ°Ð½Ð¾Ð²Ð»ÐµÐ½Ð° Ð²ÐµÐ±-Ð¿ÑÐ¾Ð³ÑÐ°Ð¼Ð° ÑÐ°ÐºÐ¾Ð¶ Ð·Ð¼Ð¾Ð¶Ðµ Ð±ÐµÐ·Ð¿ÐµÑÐ½Ð¾ Ð²Ð·Ð°ÑÐ¼Ð¾Ð´ÑÑÑÐ¸ Ð· ÑÐ½ÑÐ¸Ð¼Ð¸ Ð¿ÑÐ¾Ð³ÑÐ°Ð¼Ð°Ð¼Ð¸ ÑÐ° Ð²Ð°ÑÐ¾Ñ Ð¾Ð¿ÐµÑÐ°ÑÑÐ¹Ð½Ð¾Ñ ÑÐ¸ÑÑÐµÐ¼Ð¾Ñ. \",\n    hint: \"ÐÐ½Ð°Ð¹Ð´ÐµÐ½Ð¾ Ð½Ð¾Ð²Ð¸Ð¹ Ð²Ð¼ÑÑÑ\",\n    update: \"ÐÐ¾ÑÑÑÐ¿Ð½Ð¸Ð¹ Ð½Ð¾Ð²Ð¸Ð¹ ÐºÐ¾Ð½ÑÐµÐ½Ñ.\",\n  },\n\n  \"/ru/\": {\n    install: \"Ð£ÑÑÐ°Ð½Ð¾Ð²Ð¸ÑÑ\",\n    iOSInstall:\n      \"ÐÐ°Ð¶Ð¼Ð¸ÑÐµ ÐºÐ½Ð¾Ð¿ÐºÑ Â«ÐÐ¾Ð´ÐµÐ»Ð¸ÑÑÑÑÂ», Ð° Ð·Ð°ÑÐµÐ¼ Â«ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ Ð½Ð° Ð³Ð»Ð°Ð²Ð½ÑÐ¹ ÑÐºÑÐ°Ð½Â»\",\n    cancel: \"ÐÑÐ¼ÐµÐ½Ð¸ÑÑ\",\n    close: \"ÐÐ°ÐºÑÑÑÑ\",\n    prevImage: \"ÐÑÐµÐ´ÑÐ´ÑÑÐµÐµ Ð¸Ð·Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð¸Ðµ\",\n    nextImage: \"Ð¡Ð»ÐµÐ´ÑÑÑÐµÐµ Ð¸Ð·Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð¸Ðµ\",\n    desc: \"ÐÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ\",\n    feature: \"ÐÑÐ½Ð¾Ð²Ð½ÑÐµ ÑÑÐ½ÐºÑÐ¸Ð¸\",\n    explain:\n      \"Ð­ÑÐ¾ Ð¿ÑÐ¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¼Ð¾Ð¶ÐµÑ Ð±ÑÑÑ ÑÑÑÐ°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ð½Ð° Ð²Ð°ÑÐµÐ¼ ÐºÐ¾Ð¼Ð¿ÑÑÑÐµÑÐµ Ð¸Ð»Ð¸ Ð¼Ð¾Ð±Ð¸Ð»ÑÐ½Ð¾Ð¼ ÑÑÑÑÐ¾Ð¹ÑÑÐ²Ðµ.  Ð­ÑÐ¾ Ð¿Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ Ð²ÐµÐ±-Ð¿ÑÐ¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð²ÑÐ³Ð»ÑÐ´ÐµÑÑ Ð¸ Ð²ÐµÑÑÐ¸ ÑÐµÐ±Ñ ÐºÐ°Ðº Ð»ÑÐ±Ð¾Ðµ Ð´ÑÑÐ³Ð¾Ðµ ÑÑÑÐ°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ð¾Ðµ Ð¿ÑÐ¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ.  ÐÑ Ð½Ð°Ð¹Ð´ÐµÑÐµ ÐµÐ³Ð¾ Ð² ÑÐ¿Ð¸ÑÐºÐ°Ñ Ð¿ÑÐ¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Ð¸ ÑÐ¼Ð¾Ð¶ÐµÑÐµ Ð·Ð°ÐºÑÐµÐ¿Ð¸ÑÑ ÐµÐ³Ð¾ Ð½Ð° Ð´Ð¾Ð¼Ð°ÑÐ½ÐµÐ¼ ÑÐºÑÐ°Ð½Ðµ, Ð² Ð¼ÐµÐ½Ñ Ð¿ÑÑÐº Ð¸Ð»Ð¸ Ð½Ð° Ð¿Ð°Ð½ÐµÐ»Ð¸ Ð·Ð°Ð´Ð°Ñ.  Ð£ÑÑÐ°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ð¾Ðµ Ð²ÐµÐ±-Ð¿ÑÐ¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ ÑÐ°ÐºÐ¶Ðµ ÑÐ¼Ð¾Ð¶ÐµÑ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑÐ²Ð¾Ð²Ð°ÑÑ Ñ Ð´ÑÑÐ³Ð¸Ð¼Ð¸ Ð¿ÑÐ¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸ Ð¸ Ð¾Ð¿ÐµÑÐ°ÑÐ¸Ð¾Ð½Ð½Ð¾Ð¹ ÑÐ¸ÑÑÐµÐ¼Ð¾Ð¹. \",\n    hint: \"ÐÐ°Ð¹Ð´ÐµÐ½ Ð½Ð¾Ð²ÑÐ¹ ÐºÐ¾Ð½ÑÐµÐ½Ñ\",\n    update: \"ÐÐ¾ÑÑÑÐ¿ÐµÐ½ Ð½Ð¾Ð²ÑÐ¹ ÐºÐ¾Ð½ÑÐµÐ½Ñ.\",\n  },\n\n  \"/br/\": {\n    install: \"Instalar\",\n    iOSInstall: \"Toque no botÃ£o de compartilhar e depois 'Adicionar Ã  Home'\",\n    cancel: \"Cancelar\",\n    close: \"Fechar\",\n    prevImage: \"Imagem anterior\",\n    nextImage: \"PrÃ³xima imagem\",\n    desc: \"DescriÃ§Ã£o\",\n    feature: \"CaracterÃ­sticas Chave\",\n    explain:\n      \"Esta aplicaÃ§Ã£o web pode ser instalada no seu PC ou dispositivo mÃ³vel. Isso farÃ¡ com que ela se pareÃ§a e se comporte como qualquer outra aplicaÃ§Ã£o.  VocÃª a encontrarÃ¡ na lista de apps e poderÃ¡ adicionar seu Ã­cone Ã  tela de entrada, menus ou barras de tarefa.  Uma vez instalada, esta aplicaÃ§Ã£o web tambÃ©m poderÃ¡ interagir com outras aplicaÃ§Ãµes ou com o prÃ³prio sistema operacional. \",\n    hint: \"Novo conteÃºdo encontrado\",\n    update: \"Novo conteÃºdo estÃ¡ disponÃ­vel.\",\n  },\n\n  \"/pl/\": {\n    install: \"Zainstaluj\",\n    iOSInstall:\n      \"Stuknij przycisk udostÄpniania, a nastÄpnie âDodaj do ekranu gÅÃ³wnegoâ\",\n    cancel: \"Anuluj\",\n    close: \"Zamknij\",\n    prevImage: \"Poprzedni obrazek\",\n    nextImage: \"NastÄpny obrazek\",\n    desc: \"Opis\",\n    feature: \"Kluczowe cechy\",\n    explain:\n      \"TÄ aplikacjÄ moÅ¼na zainstalowaÄ na komputerze lub urzÄdzeniu mobilnym. DziÄki temu ta aplikacja internetowa bÄdzie wyglÄdaÄ i zachowywaÄ siÄ jak kaÅ¼da inna zainstalowana aplikacja. Znajdziesz jÄ na listach aplikacji i bÄdziesz mÃ³gÅ przypiÄÄ go do ekranu gÅÃ³wnego, menu startowego lub paskÃ³w zadaÅ. Ta zainstalowana aplikacja internetowa bÄdzie rÃ³wnieÅ¼ mogÅa bezpiecznie komunikowaÄ siÄ z innymi aplikacjami i systemem operacyjnym.\",\n    hint: \"Znaleziono nowÄ zawartoÅÄ.\",\n    update: \"Nowa zawartoÅÄ jest dostÄpna.\",\n  },\n\n  \"/sk/\": {\n    install: \"InsÅ¡talÃ¡cia\",\n    iOSInstall:\n      \"Klikni na tlaÄidlo zdielania a potom 'Daj na domovskÃº obrazovku'\",\n    cancel: \"ZruÅ¡iÅ¥\",\n    close: \"ZavrieÅ¥\",\n    prevImage: \"ProdoÅ¡lÃ­ obrÃ¡zok\",\n    nextImage: \"ÄalÅ¡Ã­ obrÃ¡zok\",\n    desc: \"PoznÃ¡mka\",\n    feature: \"KÄ¾ÃºÄovÃ© vlastnosti\",\n    explain:\n      \"TÃºto aplikÃ¡ciu je moÅ¾nÃ© nainÅ¡talovaÅ¥ na poÄÃ­taÄ alebo mobil.  Toto umoÅ¾nÃ½ sa sprÃ¡vaÅ¥ aplikÃ¡cii ako kaÅ¾dej inej nainÅ¡talovanej aplikÃ¡cii.  NÃ¡jdeÅ¡ ju vo svojom liste aplikÃ¡cii a budeÅ¡ mÃ´cÅ¥ ju pripnÃºÅ¥ na domovskÃº strÃ¡nku, Å¡tartovacieho menu alebo do panelu Ãºloh.  TÃ¡to nainÅ¡talovanÃ¡ webovÃ¡ aplikÃ¡cia umÅ¾nÃ­ tieÅ¾ bezpeÄne komunikovaÅ¥ s ostatnÃ½mi nainÅ¡talovanÃ½mi aplikÃ¡ciami a operaÄnÃ½m systÃ©mom. \",\n    hint: \"NovÃ½ obsah bol nÃ¡jdenÃ½.\",\n    update: \"NovÃ½ obsah je dostupnÃ½.\",\n  },\n\n  \"/fr/\": {\n    install: \"Installer\",\n    iOSInstall:\n      \"Appuyez sur le bouton partager puis 'Ajouter Ã  l'Ã©cran d'accueil'\",\n    cancel: \"Annuler\",\n    close: \"Fermer\",\n    prevImage: \"Image prÃ©cÃ©dente\",\n    nextImage: \"Image suivante\",\n    desc: \"Description\",\n    feature: \"Composants clÃ©s\",\n    explain:\n      \"Cette app peut Ãªtre installÃ©e sur PC ou smartphone.  Cela permettra de rendre cette page web comme n'importe quelle autre application.  Vous la trouverez dans votre liste d'application et serez capable de la pin sur votre Ã©cran principal et divers menus.  L'application web installÃ©e sera capable d'interagir avec les autres applications et le systÃ¨me d'exploitation.\",\n    hint: \"New content found.\",\n    update: \"New content is available.\",\n  },\n\n  \"/es/\": {\n    install: \"Instalar\",\n    iOSInstall:\n      \"Toque el botÃ³n compartir y luego 'Agregar a la pantalla de inicio'\",\n    cancel: \"Cancelar\",\n    close: \"Cerrar\",\n    prevImage: \"Imagen anterior\",\n    nextImage: \"Imagen siguiente\",\n    desc: \"DescripciÃ³n\",\n    feature: \"CaracterÃ­sticas clave\",\n    explain:\n      \"Esta aplicaciÃ³n se puede instalar en su PC o dispositivo mÃ³vil. Esto permitirÃ¡ que esta aplicaciÃ³n web se vea y se comporte como cualquier otra aplicaciÃ³n instalada. Lo encontrarÃ¡ en su lista de aplicaciones y podrÃ¡ fijarlo a su pantalla de inicio, menÃºs de inicio o barras de tareas. Esta aplicaciÃ³n web instalada tambiÃ©n podrÃ¡ interactuar de manera segura con otras aplicaciones y su sistema operativo.\",\n    hint: \"Nuevo contenido encontrado.\",\n    update: \"Hay nuevo contenido disponible.\",\n  },\n\n  \"/ja/\": {\n    install: \"ã¤ã³ã¹ãã¼ã«\",\n    iOSInstall:\n      \"å±æãã¿ã³ãã¿ããããããã¼ã ã¹ã¯ãªã¼ã³ã«è¿½å ããã¿ãããã¾ã\",\n    cancel: \"ã­ã£ã³ã»ã«\",\n    close: \"éãã\",\n    prevImage: \"åã®ç»å\",\n    nextImage: \"æ¬¡ã®ç»å\",\n    desc: \"è©³ç´°\",\n    feature: \"ä¸»ãªç¹å¾´\",\n    explain:\n      \"ãã®ã¢ããªã¯ãPCã¾ãã¯ã¢ãã¤ã«ããã¤ã¹ã«ã¤ã³ã¹ãã¼ã«ãããã¨ãã§ãã¾ãã ããã«ããããã®ã¦ã§ãã¢ããªã¯ãã¤ã³ã¹ãã¼ã«ããã¦ããä»ã®ã¢ããªã¨åæ§ã«è¡¨ç¤ºãããåä½ããããã«ãªãã¾ãã ã¢ããªä¸è¦§ã§è¦ã¤ãããã¨ãã§ãããã¼ã ç»é¢ãã¹ã¿ã¼ãã¡ãã¥ã¼ãã¿ã¹ã¯ãã¼ã«åºå®ãããã¨ãã§ãã¾ãã ãã®ã¤ã³ã¹ãã¼ã«ãããã¦ã§ãã¢ããªã±ã¼ã·ã§ã³ã¯ãä»ã®ã¢ããªã±ã¼ã·ã§ã³ããªãã¬ã¼ãã£ã³ã°ã·ã¹ãã ã¨å®å¨ã«ããåããããã¨ãã§ãã¾ãã\",\n    hint: \"æ°ããã³ã³ãã³ããè¦ã¤ããã¾ããã\",\n    update: \"æ°ããã³ã³ãã³ããç»å ´ãã¾ããã\",\n  },\n};\n","import { ensureEndingSlash } from \"@vuepress/shared\";\nimport { getDirname, path } from \"@vuepress/utils\";\n\nimport type { App } from \"@vuepress/core\";\nimport type { PWAOptions } from \"../shared/index.js\";\n\nconst __dirname = getDirname(import.meta.url);\nconst CLIENT_FOLDER = ensureEndingSlash(path.resolve(__dirname, \"../client\"));\n\nexport const prepareConfigFile = (\n  app: App,\n  options: PWAOptions\n): Promise<string> => {\n  let configImport = \"\";\n  let rootComponents = \"\";\n\n  if (options.showInstall) {\n    configImport += `import PWAInstall from \"${CLIENT_FOLDER}components/PWAInstall.js\";\\n`;\n\n    rootComponents += `PWAInstall,\\n`;\n  }\n\n  if (options.update === \"hint\") {\n    configImport += `import SWHintPopup from \"${\n      options.hintComponent || `${CLIENT_FOLDER}components/SWHintPopup.js`\n    }\";\\n`;\n\n    rootComponents += `SWHintPopup,\\n`;\n  } else if (options.update !== \"disable\" && options.update !== \"force\") {\n    configImport += `import SWUpdatePopup from \"${\n      options.updateComponent || `${CLIENT_FOLDER}components/SWUpdatePopup.js`\n    }\";\\n`;\n\n    rootComponents += `SWUpdatePopup,\\n`;\n  }\n\n  return app.writeTemp(\n    `pwa2/config.js`,\n    `import { defineClientConfig } from \"@vuepress/client\";\nimport { setupPWA } from \"${CLIENT_FOLDER}composables/setup.js\";\n${configImport}\n\nexport default defineClientConfig({\n  setup: () => {\n    setupPWA();\n  },\n  rootComponents: [\n${rootComponents\n  .split(\"\\n\")\n  .map((item) => `    ${item}`)\n  .join(\"\\n\")}\n  ],\n});`\n  );\n};\n","import { useSassPalettePlugin } from \"vuepress-plugin-sass-palette\";\nimport {\n  addViteOptimizeDepsInclude,\n  addViteSsrNoExternal,\n  getLocales,\n  useCustomDevServer,\n} from \"vuepress-shared\";\n\nimport { convertOptions } from \"./compact/index.js\";\nimport { getManifest, generateManifest } from \"./generateManifest.js\";\nimport { generateServiceWorker } from \"./generateServiceWorker.js\";\nimport { appendBase } from \"./helper.js\";\nimport { injectLinkstoHead } from \"./injectHead.js\";\nimport { pwaLocales } from \"./locales.js\";\nimport { prepareConfigFile } from \"./prepare.js\";\nimport { logger } from \"./utils.js\";\n\nimport type { PluginFunction } from \"@vuepress/core\";\nimport type { PWAOptions } from \"../shared/index.js\";\n\nexport const pwaPlugin =\n  (options: PWAOptions = {}, legacy = false): PluginFunction =>\n  (app) => {\n    // TODO: Remove it in v2 stable\n    if (legacy) convertOptions(options as PWAOptions & Record<string, unknown>);\n    if (app.env.isDebug) logger.info(`Options: ${options.toString()}`);\n\n    const { base, shouldPrefetch = true } = app.options;\n\n    if (options.appendBase) appendBase(base, options);\n\n    if (shouldPrefetch === true)\n      logger.warn(\n        'The plugin will register service worker to handle assets, so we recommend you to set \"shouldPrefetch: false\" in VuePress config file.'\n      );\n\n    const manifest = getManifest(app, options);\n\n    app.options.head = injectLinkstoHead(options, base, app.options.head);\n\n    useSassPalettePlugin(app, { id: \"hope\" });\n\n    return {\n      name: \"vuepress-plugin-pwa2\",\n\n      define: () => ({\n        PWA_LOCALES: getLocales({\n          app,\n          name: \"pwa\",\n          default: pwaLocales,\n          config: options.locales,\n        }),\n        SW_FORCE_UPDATE: options.update === \"force\",\n        SW_PATH: options.swPath || \"service-worker.js\",\n      }),\n\n      extendsBundlerOptions: (config: unknown, app): void => {\n        addViteOptimizeDepsInclude({ app, config }, \"register-service-worker\");\n\n        addViteSsrNoExternal({ app, config }, [\n          \"register-service-worker\",\n          \"vuepress-shared\",\n        ]);\n\n        useCustomDevServer(\n          config,\n          app,\n          \"/manifest.webmanifest\",\n          async () => JSON.stringify(await manifest),\n          \"Unexpected manifest generate error\"\n        );\n      },\n\n      onGenerated: async (app): Promise<void> => {\n        await generateManifest(app, manifest);\n        await generateServiceWorker(app, options);\n      },\n\n      clientConfigFile: (app) => prepareConfigFile(app, options),\n    };\n  };\n"],"names":["logger","Logger","deprecatedLogger","options","deprecatedOption","newOption","msg","scope","keys","temp","key","index","convertOptions","getManifest","app","_a","_b","_c","dir","siteData","base","userManifestPath","userManifestJSONPath","optionManifest","userManifest","fs","getRootLang","generateManifest","manifest","manifestPath","chalk","path","imageFilter","outDir","maxsize","manifestEntries","warnings","imageExtensions","entry","ext","stats","generateServiceWorker","dest","title","locales","swDest","destDir","globPatterns","generateSW","count","size","warning","appendBaseHelper","link","appendBasetoManifest","icon","shortcut","screenshot","appendBase","injectLinkstoHead","head","metaKeys","linkKeys","item","fallBackIcon","setLink","rel","href","more","setMeta","name","content","icons","pwaLocales","__dirname","getDirname","CLIENT_FOLDER","ensureEndingSlash","prepareConfigFile","configImport","rootComponents","pwaPlugin","legacy","shouldPrefetch","useSassPalettePlugin","getLocales","config","addViteOptimizeDepsInclude","addViteSsrNoExternal","useCustomDevServer"],"mappings":"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"}