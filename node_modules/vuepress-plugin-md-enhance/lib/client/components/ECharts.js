import{useEventListener,useDebounceFn}from"@vueuse/core";import{defineComponent,ref,onMounted,onBeforeUnmount,h}from"vue";import{atou}from"vuepress-shared/lib/client";import"../styles/echarts.scss";const LOADING_SVG='<svg xmlns="http://www.w3.org/2000/svg" class="loading-icon" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s"/></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.3333333333333333s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.3333333333333333s"/></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.6666666666666666s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.6666666666666666s"/></circle></svg>',parseEChartsConfig=(config,type)=>{if(type==="js"){const exports={},module={exports};return eval(config),module.exports}return JSON.parse(config)};var ECharts=defineComponent({name:"ECharts",props:{config:{type:String,required:!0},id:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"json"}},setup(t){const n=ref();let e;const r=ref(!0);return onMounted(()=>{Promise.all([import("echarts"),new Promise(i=>setTimeout(i,MARKDOWN_ENHANCE_DELAY))]).then(([i])=>{const s=parseEChartsConfig(atou(t.config),t.type);e=i.init(n.value),e.showLoading(),e.setOption(s),e.hideLoading(),r.value=!1}),useEventListener("resize",useDebounceFn(()=>e==null?void 0:e.resize(),100))}),onBeforeUnmount(()=>{e==null||e.dispose()}),()=>[t.title?h("div",{class:"echarts-title"},decodeURIComponent(t.title)):null,r.value?h("div",{class:"echarts-loading-wrapper",innerHTML:LOADING_SVG}):null,h("div",{ref:n,class:"echarts-wrapper",id:t.id})]}});export{ECharts as default};
//# sourceMappingURL=ECharts.js.map
