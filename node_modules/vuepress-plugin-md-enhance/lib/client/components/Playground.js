import{ClientOnly as e}from"@vuepress/client";import{defineComponent as t,ref as i,h as n,reactive as s,onMounted as r}from"vue";import{deepAssign as a}from"vuepress-shared/lib/client";import"../styles/playground.scss";import{ReplStore as o,Repl as l}from"@vue/repl";import"@vue/repl/style.css";const c='<svg xmlns="http://www.w3.org/2000/svg" class="loading-icon" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s"/></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.3333333333333333s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.3333333333333333s"/></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.6666666666666666s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.6666666666666666s"/></circle></svg>',p=PLAYGROUND_OPTIONS,d=a({},{mode:"external",external:{base:"https://sfc.vuejs.org/",defaultImportsMap:"import-map.json"},internal:{defaultImportsMap:"import-map.json",autoResize:!0,showCode:!1,showCompileOutput:!1,showImportMap:!0,clearConsole:!1}},p||{});const u=e=>a({},d,JSON.parse(decodeURIComponent(e))),g=(e,t)=>{const i=JSON.parse(decodeURIComponent(e)),n={};for(const e in i)i.hasOwnProperty(e)&&(n[e]=i[e].content);const s=(r=JSON.stringify(n),btoa(unescape(encodeURIComponent(r))));var r;const{base:a,options:o}=t,l=a.replace(/\/+$/g,"");let c;o&&(c=new URLSearchParams(o).toString());return{encoded:s,link:c?`${l}?${c}#${s}`:`${l}#${s}`}};var m=t({name:"ExternalPlayground",props:{id:{type:String,required:!0},config:{type:String,required:!0},title:{type:String,default:""},settings:{type:String,default:"{}"}},setup(e){const t=i(null),s=i(null),r=i(!0),a=u(e.settings),{link:o}=g(e.config,a.external||{});return()=>[n("div",{ref:t,class:"playground-container",id:e.id},[n("div",{class:"title-container"},[e.title?n("div",{class:"playground-title"},decodeURIComponent(e.title)):null,n("div",{class:"op-btns"},[n("a",{class:"op-btn",href:o,target:"_blank",innerHTML:'<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M512 74.667C270.933 74.667 74.667 270.933 74.667 512S270.933 949.333 512 949.333 949.333 753.067 949.333 512 753.067 74.667 512 74.667zm0 810.666C307.2 885.333 138.667 716.8 138.667 512S307.2 138.667 512 138.667 885.333 307.2 885.333 512 716.8 885.333 512 885.333z"/><path d="M708.267 465.067 473.6 330.667c-8.533-4.267-17.067-6.4-25.6-6.4-29.867 0-53.333 23.466-53.333 53.333v268.8c0 8.533 2.133 19.2 6.4 25.6 10.666 17.067 27.733 27.733 46.933 27.733 8.533 0 17.067-2.133 25.6-6.4l234.667-134.4c8.533-4.266 14.933-10.666 19.2-19.2 6.4-12.8 8.533-27.733 4.266-40.533-2.133-14.933-10.666-25.6-23.466-34.133zM458.667 627.2V396.8L661.333 512 458.667 627.2z"/></svg>'})])]),n("div",{class:"preview-container"},[r.value?n("div",{class:["preview-loading-wrapper"],innerHTML:c}):null,n("iframe",{ref:s,class:"iframe-preview",src:o,onload:()=>r.value=!1})])])]}}),v=t({name:"InternalPlayground",props:{id:{type:String,required:!0},config:{type:String,required:!0},title:{type:String,default:""},settings:{type:String,default:"{}"}},setup(e){const t=i(null),a=i(!0),p=u(e.settings),d=p.internal||{},m=i(d.showCode||!1),{encoded:v}=g(e.config,p.external||{}),y=i(new o({serializedState:v,showOutput:!0})),f=s({store:y,autoResize:d.autoResize||!0,showCompileOutput:d.showCompileOutput||!1,showImportMap:d.showImportMap||!0,clearConsole:d.clearConsole||!1,sfcOptions:d.sfcOptions||{},layout:d.layout||"vertical",ssr:d.ssr||!1});return r((async()=>{await(async()=>{f.store||(f.store=y.value),d.vueVersion&&await y.value.setVueVersion(d.vueVersion)})(),a.value=!1})),()=>[n("div",{ref:t,class:"playground-container internal",id:e.id},[n("div",{class:"title-container"},[e.title?n("div",{class:"playground-title"},decodeURIComponent(e.title)):null,n("div",{class:"op-btns"},[n("a",{class:"op-btn code",href:"javascript:;",innerHTML:'<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M240.496 272c-13.504 0-25.664 5.632-34.384 14.608l-.048-.048-189.216 189.2A47.664 47.664 0 0 0 0 512c0 13.504 5.616 25.664 14.592 34.368l-.032.064 192 192 .048-.064A47.68 47.68 0 0 0 240 752a48 48 0 0 0 48-48c0-12.992-5.216-24.752-13.616-33.392l.048-.048-158.304-158.32 157.808-157.808-.048-.048A47.808 47.808 0 0 0 288.496 320a48 48 0 0 0-48-48zm784 240c0-14.56-6.608-27.44-16.848-36.24l-189.216-189.2-.032.048A47.872 47.872 0 0 0 784 272a48 48 0 0 0-48 48c0 13.504 5.632 25.664 14.608 34.384l-.048.048L908.368 512.24l-158.32 158.32.048.048A47.808 47.808 0 0 0 736.48 704a48 48 0 0 0 48 48c12.992 0 24.752-5.216 33.408-13.632l.048.064 192-192-.048-.064A47.68 47.68 0 0 0 1024.496 512zM640 128c-20.8 0-38.496 13.232-45.168 31.712L339.2 830.784a48 48 0 0 0 89.968 33.504L684.8 193.216A48 48 0 0 0 640 128z"/></svg>',onclick:()=>m.value=!m.value})])]),n("div",{class:"preview-container repl-container "+(m.value?"show-code":"hide-code")},[a.value?n("div",{class:["preview-loading-wrapper"],innerHTML:c}):null,n(l,f)])])]}}),y=t({name:"Playground",props:{id:{type:String,required:!0},title:{type:String,default:""},config:{type:String,default:"{}"},settings:{type:String,default:"{}"}},setup(t){const i=u(t.settings),s=i.mode,r=encodeURIComponent("%IMPORT_MAP_KEY%"),a="internal"===s?i.internal?.defaultImportsMap:i.external?.defaultImportsMap;return()=>[n(e,null,[n("internal"===s?v:m,{id:t.id,title:t.title,settings:t.settings,config:t.config.replace(r,a||"")})])]}});export{y as default};
//# sourceMappingURL=Playground.js.map
