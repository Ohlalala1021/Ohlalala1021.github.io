import{h as t,defineComponent as b,ref as d,onMounted as T,watch as x,onBeforeUnmount as h,nextTick as v}from"vue";import{IconBase as M,atou as g}from"vuepress-shared/lib/client";import"../styles/mermaid.scss";const k=()=>t(M,{name:"loading"},()=>["0s","-0.333s","-0.667s"].map(e=>t("circle",{cx:50,cy:50,r:0,fill:"none",stroke:"currentColor",strokeWidth:"2"},[t("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:e}),t("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:e})]))),B=e=>({dark:e,background:e?"#1e1e1e":"#fff",primaryColor:e?"#389d70":"#4abf8a",primaryBorderColor:e?"#389d70":"#4abf8a",primaryTextColor:"#fff",secondaryColor:"#ffb500",secondaryBorderColor:e?"#fff":"#000",secondaryTextColor:e?"#ddd":"#333",tertiaryColor:e?"#282828":"#efeef4",tertiaryBorderColor:e?"#bbb":"#242424",tertiaryTextColor:e?"#ddd":"#333",noteBkgColor:e?"#f6d365":"#fff5ad",noteTextColor:"#242424",noteBorderColor:e?"#f6d365":"#333",lineColor:e?"#d3d3d3":"#333",textColor:e?"#fff":"#242424",mainBkg:e?"#389d70":"#4abf8a",errorBkgColor:"#eb4d5d",errorTextColor:"#fff",nodeBorder:e?"#389d70":"#4abf8a",nodeTextColor:e?"#fff":"#242424",signalTextColor:e?"#9e9e9e":"#242424",classText:"#fff",labelColor:"#fff",fillType0:e?"#cf1322":"#f1636e",fillType1:"#f39c12",fillType2:"#2ecc71",fillType3:"#fa541c",fillType4:"#25a55b",fillType5:"#13c2c2",fillType6:"#096dd9",fillType7:"#aa6fe9"});var W=b({name:"Mermaid",props:{id:{type:String,required:!0},code:{type:String,required:!0}},setup(e){const o=d(""),c=d(),a=d(!1);let i=null;return T(()=>{const l=document.querySelector("html"),u=g(e.code),s=()=>l.classList.contains("dark")||l.getAttribute("data-theme")==="dark";a.value=s(),Promise.all([import("mermaid"),new Promise(n=>setTimeout(n,MARKDOWN_ENHANCE_DELAY))]).then(([{default:n}])=>{const{initialize:m,render:p}=n,f=()=>{const r=document.createElement("div");r.style.position="relative",r.style.top="-9999px";const y=C=>{o.value=C,document.body.removeChild(r)};m({theme:"base",themeVariables:B(a.value),flowchart:{useMaxWidth:!1},sequence:{useMaxWidth:!1},journey:{useMaxWidth:!1},gantt:{useMaxWidth:!1},er:{useMaxWidth:!1},pie:{useMaxWidth:!1},...MERMAID_OPTIONS,startOnLoad:!1}),o.value="",document.body.appendChild(r),v(()=>{p(e.id,u,y,r)})};f(),i=new MutationObserver(()=>{a.value=s()}),i.observe(l,{attributeFilter:["class","data-theme"],attributes:!0}),x(a,f)})}),h(()=>{i==null||i.disconnect()}),()=>t("div",{ref:c,class:["mermaid-wrapper",{loading:!o.value}]},o.value?t("div",{class:"content",innerHTML:o.value}):t(k))}});export{W as default};
//# sourceMappingURL=Mermaid.js.map
